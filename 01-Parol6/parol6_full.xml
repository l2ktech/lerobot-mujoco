<?xml version="1.0"?>
<!-- PAROL6完整版: 机械臂 + 物体 + 夹爪 + 摄像头 -->
<mujoco model="parol6_full">

    <!-- 编译器配置 -->
    <compiler angle="radian" meshdir="meshes" autolimits="true" eulerseq="xyz"/>

    <!-- 可视化配置 -->
    <visual>
        <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
        <rgba haze="0.15 0.25 0.35 1"/>
        <global offwidth="2560" offheight="1440"/>
        <quality shadowsize="4096"/>
        <map stiffness="700" shadowscale="0.5" fogstart="10" fogend="15" zfar="40"/>
    </visual>

    <!-- 物理引擎配置 -->
    <option timestep="0.002" iterations="50" solver="Newton" gravity="0 0 -9.81" cone="elliptic"/>

    <!-- 资产定义 -->
    <asset>
        <!-- 地面纹理 -->
        <texture name="grid" type="2d" builtin="checker" width="512" height="512"
                 rgb1="0.1 0.2 0.3" rgb2="0.2 0.3 0.4"/>
        <material name="grid" texture="grid" texrepeat="1 1" texuniform="true" reflectance="0.2"/>

        <!-- 机械臂STL网格 -->
        <mesh name="base_link" file="base_link.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l1" file="L1.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l2" file="L2.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l3" file="L3.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l4" file="L4.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l5" file="L5.STL" scale="0.001 0.001 0.001"/>
        <mesh name="l6" file="L6.STL" scale="0.001 0.001 0.001"/>

        <!-- 物体纹理 -->
        <texture name="plate_tex" type="2d" builtin="flat" width="512" height="512" rgb1="0.9 0.9 0.9"/>
        <material name="plate_mat" texture="plate_tex" specular="0.3" shininess="0.3"/>
        <texture name="mug_red_tex" type="2d" builtin="flat" width="512" height="512" rgb1="0.8 0.1 0.1"/>
        <material name="mug_red_mat" texture="mug_red_tex" specular="0.5" shininess="0.5"/>
        <texture name="mug_blue_tex" type="2d" builtin="flat" width="512" height="512" rgb1="0.1 0.1 0.8"/>
        <material name="mug_blue_mat" texture="mug_blue_tex" specular="0.5" shininess="0.5"/>
    </asset>

    <!-- 默认参数 -->
    <default>
        <joint damping="0.5" armature="0.01"/>
        <geom contype="1" conaffinity="1" condim="3" friction="0.8 0.1 0.1"/>
        <motor ctrlrange="-1 1" ctrllimited="true"/>
        <position ctrlrange="-3.14 3.14" kp="10"/>
    </default>

    <!-- 世界环境 -->
    <worldbody>
        <!-- 地面 -->
        <geom name="floor" type="plane" size="2 2 0.1" material="grid"
              condim="3" contype="1" conaffinity="1"/>

        <!-- 光源 -->
        <light pos="0 0 3" dir="0 0 -1" directional="false" diffuse="0.8 0.8 0.8"/>
        <light pos="2 2 3" dir="-1 -1 -1" directional="false" diffuse="0.4 0.4 0.4"/>

        <!-- 物体 -->
        <!-- 盘子 -->
        <body name="body_obj_plate_11" pos="0.3 -0.25 0.82">
            <freejoint/>
            <inertial pos="0 0 0" mass="0.5" diaginertia="0.001 0.001 0.001"/>
            <geom name="plate" type="cylinder" size="0.09 0.01" material="plate_mat"/>
        </body>

        <!-- 红色杯子 -->
        <body name="body_obj_mug_5" pos="0.32 0.0 0.83">
            <freejoint/>
            <inertial pos="0 0 0.03" mass="0.2" diaginertia="0.0005 0.0005 0.0003"/>
            <geom name="mug_red_body" type="cylinder" size="0.035 0.05" pos="0 0 0.05" material="mug_red_mat"/>
            <geom name="mug_red_handle" type="capsule" size="0.008 0.03" pos="0.04 0 0.04" 
                  quat="0.707 0 0.707 0" material="mug_red_mat"/>
        </body>

        <!-- 蓝色杯子 -->
        <body name="body_obj_mug_6" pos="0.29 0.2 0.83">
            <freejoint/>
            <inertial pos="0 0 0.03" mass="0.2" diaginertia="0.0005 0.0005 0.0003"/>
            <geom name="mug_blue_body" type="cylinder" size="0.035 0.05" pos="0 0 0.05" material="mug_blue_mat"/>
            <geom name="mug_blue_handle" type="capsule" size="0.008 0.03" pos="0.04 0 0.04"
                  quat="0.707 0 0.707 0" material="mug_blue_mat"/>
        </body>

        <!-- PAROL6机械臂 -->
        <body name="base_link" pos="0 0 0">
            <inertial pos="0.0000 0.0000 0.0000" mass="0.8127" diaginertia="0.001107 0.001066 0.001479"/>
            <geom type="mesh" mesh="base_link" rgba="0.75 0.75 0.75 1"/>

            <!-- 关节1: L1 -->
            <body name="L1" pos="0.0000 0.0000 0.0000" quat="1.0000 0.0000 0.0000 0.0000">
                <inertial pos="0.0000 0.0000 0.0000" mass="0.6448" diaginertia="0.001094 0.000570 0.001295"/>
                <joint name="L1" type="hinge" axis="0.0 0.0 1.0" range="-1.70 1.70" damping="1.0"/>
                <geom type="mesh" mesh="l1" rgba="0.75 0.75 0.75 1"/>

                <!-- 关节2: L2 -->
                <body name="L2" pos="0.0234 0.0000 0.1105" quat="0.7071 -0.7071 0.0000 0.0000">
                    <inertial pos="0.0000 0.0000 0.0000" mass="0.5123" diaginertia="0.001234 0.000205 0.001322"/>
                    <joint name="L2" type="hinge" axis="0.0 0.0 1.0" range="-0.98 1.00" damping="1.0"/>
                    <geom type="mesh" mesh="l2" rgba="0.75 0.75 0.75 1"/>

                    <!-- 关节3: L3 -->
                    <body name="L3" pos="0.0000 -0.1800 0.0000" quat="-0.0000 0.7071 -0.7071 0.0000">
                        <inertial pos="0.0000 0.0000 0.0000" mass="0.5510" diaginertia="0.000578 0.000567 0.000816"/>
                        <joint name="L3" type="hinge" axis="0.0 0.0 -1.0" range="-2.00 1.30" damping="1.0"/>
                        <geom type="mesh" mesh="l3" rgba="0.75 0.75 0.75 1"/>

                        <!-- 关节4: L4 -->
                        <body name="L4" pos="0.0435 0.0000 0.0000" quat="0.0000 0.0000 0.7071 0.7071">
                            <inertial pos="0.0000 0.0000 0.0000" mass="0.3935" diaginertia="0.000372 0.000332 0.000251"/>
                            <joint name="L4" type="hinge" axis="0.0 0.0 -1.0" range="-2.00 2.00" damping="1.0"/>
                            <geom type="mesh" mesh="l4" rgba="0.75 0.75 0.75 1"/>

                            <!-- 关节5: L5 -->
                            <body name="L5" pos="0.0000 0.0000 -0.1764" quat="0.7071 -0.7071 0.0000 0.0000">
                                <inertial pos="0.0000 0.0000 0.0000" mass="0.1852" diaginertia="0.000109 0.000084 0.000111"/>
                                <joint name="L5" type="hinge" axis="0.0 0.0 -1.0" range="-2.10 2.10" damping="1.0"/>
                                <geom type="mesh" mesh="l5" rgba="0.75 0.75 0.75 1"/>

                                <!-- 关节6: L6 -->
                                <body name="L6" pos="0.0000 0.0000 0.0000" quat="0.7071 0.7071 0.0000 0.0000">
                                    <inertial pos="0.0000 0.0000 0.0000" mass="0.0703" diaginertia="0.000014 0.000018 0.000023"/>
                                    <joint name="L6" type="hinge" axis="0.0 0.0 -1.0" limited="false" damping="0.3"/>
                                    <geom type="mesh" mesh="l6" rgba="0.75 0.75 0.75 1"/>
                                    <site name="end_effector" pos="0 0 -0.08" size="0.01"/>
                                    <!-- 夹爪视角摄像头 -->
                                    <camera name="gripper_cam" pos="0 -0.1 -0.05" xyaxes="0 0 1 -1 0 0" mode="fixed"/>

                                    <!-- 夹爪 -->
                                    <body name="gripper_base" pos="0 0 -0.08">
                                        <inertial pos="0 0 0" mass="0.05" diaginertia="0.0001 0.0001 0.0001"/>
                                        <geom name="gripper_palm" type="box" size="0.02 0.025 0.01" rgba="0.3 0.3 0.3 1"/>

                                        <!-- 左侧夹爪指 -->
                                        <body name="gripper_left_outer" pos="0 0.025 0">
                                            <inertial pos="0 0.015 0" mass="0.01" diaginertia="0.00001 0.00001 0.00001"/>
                                            <joint name="rh_r1" type="slide" axis="0 1 0" range="0 0.04" damping="0.5"/>
                                            <geom name="left_outer" type="box" size="0.005 0.02 0.04" pos="0 0.02 -0.04" rgba="0.2 0.2 0.2 1"/>
                                        </body>

                                        <body name="gripper_left_inner" pos="0 0.015 0">
                                            <inertial pos="0 0.015 0" mass="0.01" diaginertia="0.00001 0.00001 0.00001"/>
                                            <joint name="rh_l1" type="slide" axis="0 1 0" range="0 0.04" damping="0.5"/>
                                            <geom name="left_inner" type="box" size="0.005 0.02 0.04" pos="0 0.02 -0.04" rgba="0.2 0.2 0.2 1"/>
                                        </body>

                                        <!-- 右侧夹爪指 -->
                                        <body name="gripper_right_outer" pos="0 -0.025 0">
                                            <inertial pos="0 -0.015 0" mass="0.01" diaginertia="0.00001 0.00001 0.00001"/>
                                            <joint name="rh_r2" type="slide" axis="0 -1 0" range="0 0.04" damping="0.5"/>
                                            <geom name="right_outer" type="box" size="0.005 0.02 0.04" pos="0 -0.02 -0.04" rgba="0.2 0.2 0.2 1"/>
                                        </body>

                                        <body name="gripper_right_inner" pos="0 -0.015 0">
                                            <inertial pos="0 -0.015 0" mass="0.01" diaginertia="0.00001 0.00001 0.00001"/>
                                            <joint name="rh_l2" type="slide" axis="0 -1 0" range="0 0.04" damping="0.5"/>
                                            <geom name="right_inner" type="box" size="0.005 0.02 0.04" pos="0 -0.02 -0.04" rgba="0.2 0.2 0.2 1"/>
                                        </body>
                                    </body>
                                </body>
                            </body>
                        </body>
                    </body>
                </body>
            </body>
        </body>

        <!-- 固定摄像头 -->
        <camera name="fixed" pos="1.5 1.5 1.5" xyaxes="-1 1 0 -0.5 -0.5 1" mode="fixed"/>
        <camera name="top" pos="0 0 2" xyaxes="1 0 0 0 1 0" mode="fixed"/>
    </worldbody>

    <!-- 执行器 -->
    <actuator>
        <!-- 机械臂关节 -->
        <position name="L1_motor" joint="L1" kp="100" ctrlrange="-1.70 1.70"/>
        <position name="L2_motor" joint="L2" kp="100" ctrlrange="-0.98 1.00"/>
        <position name="L3_motor" joint="L3" kp="100" ctrlrange="-2.00 1.30"/>
        <position name="L4_motor" joint="L4" kp="80" ctrlrange="-2.00 2.00"/>
        <position name="L5_motor" joint="L5" kp="80" ctrlrange="-2.10 2.10"/>
        <position name="L6_motor" joint="L6" kp="50" ctrlrange="-3.14 3.14"/>

        <!-- 夹爪关节 -->
        <position name="rh_r1_motor" joint="rh_r1" kp="50" ctrlrange="0 0.04"/>
        <position name="rh_l1_motor" joint="rh_l1" kp="50" ctrlrange="0 0.04"/>
        <position name="rh_r2_motor" joint="rh_r2" kp="50" ctrlrange="0 0.04"/>
        <position name="rh_l2_motor" joint="rh_l2" kp="50" ctrlrange="0 0.04"/>
    </actuator>

    <!-- 传感器 -->
    <sensor>
        <!-- 机械臂关节传感器 -->
        <jointpos name="L1_pos" joint="L1"/>
        <jointpos name="L2_pos" joint="L2"/>
        <jointpos name="L3_pos" joint="L3"/>
        <jointpos name="L4_pos" joint="L4"/>
        <jointpos name="L5_pos" joint="L5"/>
        <jointpos name="L6_pos" joint="L6"/>
        <jointvel name="L1_vel" joint="L1"/>
        <jointvel name="L2_vel" joint="L2"/>
        <jointvel name="L3_vel" joint="L3"/>
        <jointvel name="L4_vel" joint="L4"/>
        <jointvel name="L5_vel" joint="L5"/>
        <jointvel name="L6_vel" joint="L6"/>

        <!-- 夹爪传感器 -->
        <jointpos name="rh_r1_pos" joint="rh_r1"/>
        <jointpos name="rh_l1_pos" joint="rh_l1"/>
        <jointpos name="rh_r2_pos" joint="rh_r2"/>
        <jointpos name="rh_l2_pos" joint="rh_l2"/>
    </sensor>

</mujoco>